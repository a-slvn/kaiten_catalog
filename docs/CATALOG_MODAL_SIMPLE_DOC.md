# Каталоги и модалка записи (фактическая документация)

Дата фиксации поведения: 10.02.2026.

Документ описывает только то, что есть в текущем интерфейсе прототипа.

## 1. Экран «Каталоги»

### Что видно на экране
1. Заголовок «Каталоги».
2. Кнопка `Создать каталог`.
3. Таблица каталогов со столбцами:
   1. Название.
   2. Полей.
   3. Записей.
   4. Дата создания.
   5. Действия.
4. Для каждой строки доступны действия `Редактировать` и `Удалить`.

### Что можно сделать
1. Клик по строке каталога открывает страницу этого каталога.
2. Кнопка `Создать каталог` открывает форму создания.
3. Кнопка `Редактировать` открывает форму редактирования.
4. Кнопка `Удалить` открывает подтверждение удаления.

### Удаление каталога
1. Показывается модалка подтверждения.
2. В тексте указано имя каталога и количество удаляемых записей.
3. Действие необратимо.
4. Кнопки: `Отмена` и `Удалить`.

### Empty state
1. Если каталогов нет, показывается пустой экран.
2. На нем есть кнопка `Создать каталог`.

## 2. Экран «Каталог: список записей»

### Что видно на экране
1. Кнопка `Назад`.
2. Название каталога.
3. Счетчик: количество записей и количество полей.
4. Кнопка `Добавить запись`.
5. Поле поиска по записям.
6. Кнопка настроек видимых столбцов.
7. Таблица записей с сортировкой по столбцам.

### Что можно сделать
1. Клик по строке записи открывает модалку записи.
2. `Редактировать` в строке открывает форму редактирования записи.
3. `Удалить` в строке открывает подтверждение удаления записи.
4. Можно включать/выключать столбцы в поповере.
5. Можно искать по всем полям записи.

### Удаление записи в таблице
1. Показывается модалка подтверждения.
2. В тексте указано имя записи.
3. Действие необратимо.
4. Кнопки: `Отмена` и `Удалить`.

### Empty states
1. Если поиск ничего не нашел: `Ничего не найдено`.
2. Если записей нет: `Нет записей` и кнопка `Добавить запись`.

## 3. Модальное окно записи каталога

### Шапка и общая структура
1. В шапке показывается только имя записи.
2. Есть кнопка закрытия.
3. Нет блока `Создано / Обновлено`.
4. Размер модалки фиксирован как большая (`md`, высокий диалог).
5. Нижняя панель действий закреплена (sticky).

### Вкладки
1. `Обзор`
2. `Сделки (N)`

Вкладки `Поля` нет.

### Вкладка «Обзор»
Содержит 2 блока:
1. `Ключевые поля`
2. `Последние связанные сделки`

#### Блок «Ключевые поля»
1. Показываются только заполненные поля записи.
2. В свернутом виде показывается до 6 полей.
3. Кнопка `Показать все поля` раскрывает все заполненные поля.
4. Кнопка `Свернуть поля` возвращает сокращенный вид.
5. Если заполненных полей нет, выводится `Нет заполненных полей`.

#### Блок «Последние связанные сделки»
1. Показываются последние 3 связанные сделки.
2. Кнопка `Все сделки` переключает на вкладку `Сделки`.
3. Если сделок нет, выводится `Нет связанных сделок`.

### Вкладка «Сделки»
1. Поиска на вкладке нет.
2. Изначально показано 15 сделок.
3. Кнопка `Показать еще X` подгружает еще 15 сделок за клик.
4. Если сделок нет, выводится `Нет связанных сделок`.

### Карточка сделки в модалке
Содержит:
1. Название сделки.
2. Номер и дату (если есть).
3. Сумму.

Не содержит:
1. Статус.
2. Кнопку `Открыть`.

Переход:
1. Вся карточка сделки кликабельна.
2. Клик открывает карточку сделки (`DealModal`).

### Блоки связанных записей (контакты/компании)
1. Связанные записи рендерятся как кликабельные карточки.
2. Карточка контакта сделана в упрощенном формате:
   1. Первая строка: имя.
   2. Вторая строка: короткая мета-строка (например, должность, телефон, email).
3. Клик по карточке открывает связанную запись.
4. Если связанная запись в другом каталоге, интерфейс переключается в нужный каталог и открывает эту запись.

### Действия внизу модалки
1. `Удалить`
2. `Закрыть`
3. `Редактировать`

### Удаление из модалки
1. Нажатие `Удалить` открывает модалку подтверждения.
2. В тексте указано, что действие необратимо.
3. Кнопки: `Отмена` и `Удалить`.

## 4. Важное ограничение этой версии
1. Документ фиксирует именно текущее поведение прототипа.
2. Технические детали реализации, API и серверные контракты здесь не описываются.
